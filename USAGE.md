# Seg4Live2D ä½¿ç”¨ã‚¬ã‚¤ãƒ‰

Live2Dç”¨ãƒ‘ãƒ¼ãƒ„è‡ªå‹•åˆ†å‰²ã‚·ã‚¹ãƒ†ãƒ ã®ä½¿ç”¨æ–¹æ³•

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. çµ±åˆå®Ÿè¡Œï¼ˆæ¨å¥¨ï¼‰
```bash
# åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— + ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
uv run python scripts/setup_and_run.py --input data/samples/anime_woman1

# ç‰¹å®šãƒ‘ãƒ¼ãƒ„ã®ã¿å‡¦ç†
uv run python scripts/setup_and_run.py --input data/samples/anime_woman1 --parts face hair
```

### 2. å€‹åˆ¥å®Ÿè¡Œ
```bash
# ãƒ¢ãƒ‡ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆåˆå›ã®ã¿ï¼‰
uv run python scripts/download_sam2_models.py

# ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
uv run python scripts/sam2_segmentation.py --input data/samples/anime_woman1
```

## ğŸ“ å…¥åŠ›ãƒ»å‡ºåŠ›

### å…¥åŠ›
- **å¯¾å¿œå½¢å¼**: PNG, JPG, JPEG
- **æ¨å¥¨ã‚µã‚¤ã‚º**: 800Ã—1000pxç¨‹åº¦
- **ç”»åƒã‚¿ã‚¤ãƒ—**: ã‚¢ãƒ‹ãƒ¡ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒ

### å‡ºåŠ›
```
data/output/live2d_segmentation/
â”œâ”€â”€ original_image.png          # å…ƒç”»åƒ
â”œâ”€â”€ live2d_face_image.png      # é¡”ãƒ‘ãƒ¼ãƒ„ï¼ˆé€æ˜PNGï¼‰
â”œâ”€â”€ live2d_hair_image.png      # é«ªãƒ‘ãƒ¼ãƒ„ï¼ˆé€æ˜PNGï¼‰
â”œâ”€â”€ live2d_body_image.png      # ä½“ãƒ‘ãƒ¼ãƒ„ï¼ˆé€æ˜PNGï¼‰
â”œâ”€â”€ live2d_eyes_image.png      # ç›®ãƒ‘ãƒ¼ãƒ„ï¼ˆé€æ˜PNGï¼‰
â”œâ”€â”€ mask_face_image.png        # é¡”ãƒã‚¹ã‚¯ï¼ˆç™½é»’ï¼‰
â””â”€â”€ viz_face_image.png         # å¯è¦–åŒ–ç”»åƒ
```

## ğŸ¯ ãƒ‘ãƒ¼ãƒ„åˆ¥åˆ†å‰²

### å¯¾è±¡ãƒ‘ãƒ¼ãƒ„
- **face**: é¡”ã®è‚Œéƒ¨åˆ†
- **hair**: é«ªã®æ¯›
- **body**: é¦–ã‹ã‚‰ä¸‹ã®ä½“
- **eyes**: ç›®ã®éƒ¨åˆ†

### ç²¾åº¦ãƒ‡ãƒ¼ã‚¿
| ãƒ‘ãƒ¼ãƒ„ | ç²¾åº¦ | ã‚«ãƒãƒ¼ç‡ | ç‰¹å¾´ |
|--------|------|----------|------|
| Eyes | é«˜ç²¾åº¦ | 0.87% | åŠ¹ç‡æ€§55.8ï¼ˆæœ€é«˜ï¼‰ |
| Face | é«˜ç²¾åº¦ | 16.74% | è‚Œéƒ¨åˆ†ã®ã¿æŠ½å‡º |
| Hair | ä¸­ç²¾åº¦ | 42.28% | é«ªã®å¢ƒç•Œèªè­˜ |
| Body | é«˜ç²¾åº¦ | 21.20% | ä½“ã®ã‚·ãƒ«ã‚¨ãƒƒãƒˆ |

## âš™ï¸ ã‚ªãƒ—ã‚·ãƒ§ãƒ³

### åŸºæœ¬ã‚ªãƒ—ã‚·ãƒ§ãƒ³
```bash
--input, -i     # å…¥åŠ›ç”»åƒãƒ•ã‚©ãƒ«ãƒ€ï¼ˆå¿…é ˆï¼‰
--output, -o    # å‡ºåŠ›ãƒ•ã‚©ãƒ«ãƒ€ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: data/output/live2d_segmentationï¼‰
--parts, -p     # å¯¾è±¡ãƒ‘ãƒ¼ãƒ„ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: å…¨ãƒ‘ãƒ¼ãƒ„ï¼‰
--pattern       # ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: *.pngï¼‰
--max-images    # æœ€å¤§å‡¦ç†ç”»åƒæ•°
--verbose, -v   # è©³ç´°ãƒ­ã‚°è¡¨ç¤º
```

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚ªãƒ—ã‚·ãƒ§ãƒ³
```bash
--check-only      # ãƒ¢ãƒ‡ãƒ«å­˜åœ¨ç¢ºèªã®ã¿
--force-download  # å¼·åˆ¶å†ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
--skip-download   # ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¹ã‚­ãƒƒãƒ—
```

## ğŸ“‹ ä½¿ç”¨ä¾‹

### 1. åŸºæœ¬çš„ãªä½¿ç”¨
```bash
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§å®Ÿè¡Œ
uv run python scripts/sam2_segmentation.py --input data/samples/anime_woman1
```

### 2. ã‚«ã‚¹ã‚¿ãƒ è¨­å®š
```bash
# é¡”ã¨é«ªã®ã¿ã€JPEGãƒ•ã‚¡ã‚¤ãƒ«å¯¾è±¡
uv run python scripts/sam2_segmentation.py \
  --input data/samples/photos \
  --parts face hair \
  --pattern "*.jpg" \
  --output my_results
```

### 3. å¤§é‡å‡¦ç†
```bash
# æœ€å¤§10æšã¾ã§å‡¦ç†
uv run python scripts/sam2_segmentation.py \
  --input data/samples/anime_images \
  --max-images 10 \
  --verbose
```

### 4. çµ±åˆå®Ÿè¡Œ
```bash
# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‹ã‚‰å®Ÿè¡Œã¾ã§ä¸€æ‹¬
uv run python scripts/setup_and_run.py \
  --input data/samples/anime_woman1 \
  --parts face hair body
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ¢ãƒ‡ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼
```bash
# å¼·åˆ¶å†ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
uv run python scripts/setup_and_run.py --force-download
```

### CUDA/GPU ã‚¨ãƒ©ãƒ¼
```bash
# CPUä½¿ç”¨ã®å ´åˆã€config/app/development.yamlã§è¨­å®šå¤‰æ›´
device: "cpu"
```

### ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼
```bash
# ç”»åƒæ•°ã‚’åˆ¶é™
uv run python scripts/sam2_segmentation.py --input data/samples/anime_woman1 --max-images 1
```

## ğŸ“ˆ æ€§èƒ½å‘ä¸Šã®ã‚³ãƒ„

### 1. å…¥åŠ›ç”»åƒã®æœ€é©åŒ–
- **è§£åƒåº¦**: 800Ã—1000pxç¨‹åº¦ãŒæœ€é©
- **å½¢å¼**: PNGæ¨å¥¨ï¼ˆé€æ˜åº¦å¯¾å¿œï¼‰
- **å“è³ª**: æ˜ç­ãªã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒ

### 2. ãƒ‘ãƒ¼ãƒ„é¸æŠã®æœ€é©åŒ–
```bash
# é«˜ç²¾åº¦ãƒ‘ãƒ¼ãƒ„ã®ã¿å‡¦ç†
--parts eyes face body

# é«ªãŒè¤‡é›‘ãªå ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
--parts face body eyes
```

### 3. ãƒãƒƒãƒå‡¦ç†ã®æœ€é©åŒ–
```bash
# å°‘æ•°ãšã¤å‡¦ç†
--max-images 5
```

## ğŸ¨ Live2D ã§ã®ä½¿ç”¨

### 1. ãƒ•ã‚¡ã‚¤ãƒ«ä½¿ç”¨æ–¹æ³•
- `live2d_*.png` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’Live2D Cubism Editorã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- é€æ˜åº¦æƒ…å ±ãŒãã®ã¾ã¾ä½¿ç”¨å¯èƒ½
- ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†ã‘ãŒè‡ªå‹•çš„ã«å®Œäº†

### 2. æ¨å¥¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
1. Seg4Live2Dã§ãƒ‘ãƒ¼ãƒ„åˆ†å‰²
2. `live2d_*.png` ã‚’Cubism Editorã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
3. å¿…è¦ã«å¿œã˜ã¦æ‰‹å‹•å¾®èª¿æ•´
4. ãƒ¡ãƒƒã‚·ãƒ¥ç”Ÿæˆãƒ»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š

### 3. å“è³ªãƒã‚§ãƒƒã‚¯
- `viz_*.png` ã§åˆ†å‰²çµæœã‚’ç¢ºèª
- å¢ƒç•Œç·šãŒæœŸå¾…é€šã‚Šã‹ãƒã‚§ãƒƒã‚¯
- å¿…è¦ã«å¿œã˜ã¦å†å®Ÿè¡Œ

## ğŸ’¡ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ
```
your_project/
â”œâ”€â”€ input_images/           # å…ƒç”»åƒ
â”œâ”€â”€ seg4live2d_output/     # ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³çµæœ
â””â”€â”€ live2d_project/        # Live2Dãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
```

### 2. ãƒ•ã‚¡ã‚¤ãƒ«å‘½å
- å…ƒç”»åƒåã‚’åˆ†ã‹ã‚Šã‚„ã™ã
- å‡ºåŠ›ãƒ•ã‚©ãƒ«ãƒ€ã‚’ç”¨é€”åˆ¥ã«åˆ†é›¢

### 3. å“è³ªç®¡ç†
- ã¾ãš1æšã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- çµæœç¢ºèªå¾Œã«ãƒãƒƒãƒå‡¦ç†
- å®šæœŸçš„ãªæ‰‹å‹•ãƒã‚§ãƒƒã‚¯

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [Live2D Cubism Editor](https://www.live2d.com/)
- [SAM2 å…¬å¼ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/facebookresearch/segment-anything-2)
- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆGitHub](https://github.com/andam0202/Seg4Live2D)